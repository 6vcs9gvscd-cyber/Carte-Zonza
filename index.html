<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carte d'implantation - √âco-quartier Zonza</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
       
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
       
        .header {
            background: linear-gradient(135deg, #2d3436 0%, #1e272e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
       
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
       
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
       
        .content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 0;
        }
       
        .sidebar {
            background: #f8f9fa;
            padding: 30px;
            border-right: 1px solid #dee2e6;
            max-height: 700px;
            overflow-y: auto;
        }
       
        .legend-section {
            margin-bottom: 30px;
        }
       
        .legend-section h3 {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #2d3436;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
       
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s;
        }
       
        .legend-item:hover {
            background: white;
        }
       
        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            margin-right: 12px;
            border: 2px solid #ddd;
            flex-shrink: 0;
        }
       
        .legend-text {
            font-size: 0.9em;
            color: #495057;
        }
       
        .optimal-zone {
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
       
        .optimal-zone h4 {
            color: #155724;
            margin-bottom: 10px;
            font-size: 1em;
        }
       
        .optimal-zone ul {
            list-style: none;
            padding-left: 0;
        }
       
        .optimal-zone li {
            padding: 5px 0;
            font-size: 0.85em;
            color: #155724;
        }
       
        .optimal-zone li:before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }
       
        #map {
            height: 700px;
            width: 100%;
        }
       
        .info-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
       
        .info-box h4 {
            color: #dc3545;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
       
        .info-box p {
            font-size: 0.85em;
            color: #6c757d;
            line-height: 1.5;
        }
       
        .leaflet-popup-content {
            font-size: 14px;
        }
       
        .leaflet-popup-content h3 {
            margin: 0 0 10px 0;
            color: #2d3436;
        }
       
        .popup-criteria {
            list-style: none;
            padding: 0;
            margin: 10px 0;
        }
       
        .popup-criteria li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
       
        .popup-criteria li:last-child {
            border-bottom: none;
        }
       
        .score {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.85em;
            margin-left: 5px;
        }
       
        .score-high {
            background: #d4edda;
            color: #155724;
        }
       
        .score-medium {
            background: #fff3cd;
            color: #856404;
        }
       
        .score-low {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üó∫Ô∏è Carte d'Implantation Optimale</h1>
            <p>√âco-quartier de 8 maisons bois - Zonza, Corse-du-Sud</p>
        </div>
       
        <div class="content">
            <div class="sidebar">
                <div class="info-box">
                    <h4>‚ö†Ô∏è Rappel Important</h4>
                    <p>Cette analyse est bas√©e sur des crit√®res environnementaux g√©n√©raux. Une √©tude de terrain d√©taill√©e est indispensable.</p>
                </div>
               
                <div class="legend-section">
                    <h3>Zones favorables</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #28a745; opacity: 0.7;"></div>
                        <div class="legend-text"><strong>Zone OPTIMALE</strong> recommand√©e</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffc107; opacity: 0.6;"></div>
                        <div class="legend-text"><strong>Zone acceptable</strong> sous conditions</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #007bff;"></div>
                        <div class="legend-text"><strong>Centre-bourg existant</strong></div>
                    </div>
                </div>
               
                <div class="optimal-zone">
                    <h4>‚úÖ Zone Recommand√©e Nord</h4>
                    <ul>
                        <li>Proximit√© RD 368</li>
                        <li>Acc√®s pompiers rapide</li>
                        <li>Pente mod√©r√©e (<10%)</li>
                        <li>Maquis d√©grad√© (pas for√™t mature)</li>
                        <li>Distance s√©curit√© for√™t dense</li>
                        <li>Visibilit√© paysag√®re limit√©e</li>
                        <li>R√©seaux accessibles</li>
                    </ul>
                </div>
               
                <div class="legend-section" style="margin-top: 20px;">
                    <h3>Crit√®res d'analyse</h3>
                    <div class="legend-text" style="font-size: 0.85em; line-height: 1.6;">
                        ‚Ä¢ Risque incendie<br>
                        ‚Ä¢ √âtat de la v√©g√©tation<br>
                        ‚Ä¢ Topographie<br>
                        ‚Ä¢ Accessibilit√© Secours<br>
                        ‚Ä¢ R√©seaux existants<br>
                        ‚Ä¢ Impact biodiversit√©<br>
                        ‚Ä¢ Impact paysager
                    </div>
                </div>
            </div>
           
            <div id="map"></div>
        </div>
    </div>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // Coordonn√©es de Zonza (centre du bourg)
        const zonzaCenter = [41.749, 9.171];
       
        // Initialisation de la carte
        const map = L.map('map').setView(zonzaCenter, 14);
       
        // Fond de carte
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 18
        }).addTo(map);
       
        // Fond satellite alternatif
        const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles ¬© Esri'
        });
       
        // Centre-bourg de Zonza
        L.circle(zonzaCenter, {
            color: '#007bff',
            fillColor: '#007bff',
            fillOpacity: 0.3,
            radius: 300
        }).addTo(map).bindPopup(`
            <h3>Centre-bourg de Zonza</h3>
            <p><strong>Alternative recommand√©e n¬∞1</strong></p>
            <ul class="popup-criteria">
                <li>‚úÖ Pas de d√©boisement</li>
                <li>‚úÖ Risque incendie r√©duit</li>
                <li>‚úÖ Tous r√©seaux disponibles</li>
                <li>‚úÖ Densification urbaine</li>
                <li>‚ö†Ô∏è Foncier √† identifier</li>
            </ul>
        `);
       
        // ZONE OPTIMALE - Nord du bourg, pr√®s de la D368
        const zoneOptimale = L.polygon([
            [41.756, 9.168],
            [41.758, 9.168],
            [41.758, 9.175],
            [41.756, 9.175]
        ], {
            color: '#28a745',
            fillColor: '#28a745',
            fillOpacity: 0.4,
            weight: 3
        }).addTo(map);
       
        zoneOptimale.bindPopup(`
            <h3>üéØ ZONE OPTIMALE (Recommand√©e)</h3>
            <p><strong>Secteur Nord - Proximit√© D368</strong></p>
            <ul class="popup-criteria">
                <li><span class="score score-high">9/10</span> Accessibilit√© secours</li>
                <li><span class="score score-high">8/10</span> Risque incendie ma√Ætrisable</li>
                <li><span class="score score-high">8/10</span> Topographie favorable</li>
                <li><span class="score score-high">7/10</span> Impact biodiversit√© limit√©</li>
                <li><span class="score score-medium">6/10</span> V√©g√©tation d√©grad√©e</li>
                <li><span class="score score-high">8/10</span> Acc√®s r√©seaux</li>
            </ul>
            <p style="margin-top: 10px;"><strong>Score global: 46/60</strong></p>
            <p style="font-size: 0.9em; color: #155724; margin-top: 5px;">
                ‚úì Meilleur compromis environnemental en zone bois√©e
            </p>
        `);
       
        // Zone acceptable - Est
        const zoneAcceptable1 = L.polygon([
            [41.752, 9.178],
            [41.754, 9.178],
            [41.754, 9.183],
            [41.752, 9.183]
        ], {
            color: '#ffc107',
            fillColor: '#ffc107',
            fillOpacity: 0.3,
            weight: 2,
            dashArray: '5, 5'
        }).addTo(map);
       
        zoneAcceptable1.bindPopup(`
            <h3>Zone Acceptable - Est</h3>
            <p><strong>Sous conditions strictes</strong></p>
            <ul class="popup-criteria">
                <li><span class="score score-medium">6/10</span> Accessibilit√© SDIS</li>
                <li><span class="score score-medium">6/10</span> Risque incendie</li>
                <li><span class="score score-high">7/10</span> Topographie</li>
                <li><span class="score score-medium">6/10</span> Impact biodiversit√©</li>
                <li><span class="score score-medium">5/10</span> √âtat v√©g√©tation</li>
                <li><span class="score score-medium">6/10</span> Acc√®s r√©seaux</li>
            </ul>
            <p style="margin-top: 10px;"><strong>Score: 36/60</strong></p>
            <p style="font-size: 0.9em; color: #856404;">
                ‚ö†Ô∏è N√©cessite mesures ERC renforc√©es
            </p>
        `);
       
        // Zone acceptable - Ouest
        const zoneAcceptable2 = L.polygon([
            [41.747, 9.164],
            [41.749, 9.164],
            [41.749, 9.167],
            [41.747, 9.167]
        ], {
            color: '#ffc107',
            fillColor: '#ffc107',
            fillOpacity: 0.3,
            weight: 2,
            dashArray: '5, 5'
        }).addTo(map);
       
        zoneAcceptable2.bindPopup(`
            <h3>Zone Acceptable - Ouest</h3>
            <p><strong>Alternative secondaire</strong></p>
            <ul class="popup-criteria">
                <li><span class="score score-high">7/10</span> Accessibilit√© SDIS</li>
                <li><span class="score score-medium">6/10</span> Risque incendie</li>
                <li><span class="score score-medium">6/10</span> Topographie</li>
                <li><span class="score score-medium">6/10</span> Impact biodiversit√©</li>
                <li><span class="score score-medium">6/10</span> √âtat v√©g√©tation</li>
                <li><span class="score score-high">7/10</span> Acc√®s r√©seaux</li>
            </ul>
            <p style="margin-top: 10px;"><strong>Score: 38/60</strong></p>
        `);
       
        // Zones √† √âVITER - For√™t dense sud
        const zoneEviter1 = L.polygon([
            [41.742, 9.168],
            [41.745, 9.168],
            [41.745, 9.175],
            [41.742, 9.175]
        ], {
            color: '#dc3545',
            fillColor: '#dc3545',
            fillOpacity: 0.4,
            weight: 2
        }).addTo(map);
       
        zoneEviter1.bindPopup(`
            <h3>‚õî ZONE √Ä √âVITER</h3>
            <p><strong>For√™t dense mature - Sud</strong></p>
            <ul class="popup-criteria">
                <li><span class="score score-low">3/10</span> Risque incendie tr√®s √©lev√©</li>
                <li><span class="score score-low">2/10</span> Impact biodiversit√© fort</li>
                <li><span class="score score-low">4/10</span> Accessibilit√© difficile</li>
                <li><span class="score score-low">3/10</span> Relief contraignant</li>
            </ul>
            <p style="color: #721c24; font-weight: bold; margin-top: 10px;">
                ‚ùå Zone inadapt√©e au projet
            </p>
        `);
       
        // Zone √† √©viter - Relief accident√© Est
        const zoneEviter2 = L.polygon([
            [41.753, 9.185],
            [41.757, 9.185],
            [41.757, 9.190],
            [41.753, 9.190]
        ], {
            color: '#6c757d',
            fillColor: '#6c757d',
            fillOpacity: 0.4,
            weight: 2
        }).addTo(map);
       
        zoneEviter2.bindPopup(`
            <h3>‚õî ZONE √Ä √âVITER</h3>
            <p><strong>Relief tr√®s accident√©</strong></p>
            <ul class="popup-criteria">
                <li><span class="score score-low">2/10</span> Pentes >25%</li>
                <li><span class="score score-low">3/10</span> Risque √©rosion</li>
                <li><span class="score score-low">4/10</span> Co√ªt terrassement</li>
                <li><span class="score score-low">3/10</span> Accessibilit√©</li>
            </ul>
            <p style="color: #495057; font-weight: bold; margin-top: 10px;">
                ‚ùå Contraintes techniques majeures
            </p>
        `);
       
        // Ic√¥ne rouge personnalis√©e pour la mairie
        const redIcon = L.icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowSize: [41, 41]
        });
       
        // Mairie de Zonza
        L.marker([41.749, 9.171], {
            icon: redIcon,
            title: 'Mairie de Zonza'
        }).addTo(map).bindPopup('<strong>üèõÔ∏è Mairie de Zonza</strong><br>Altitude: 760m');
       
        // Caserne pompiers - 80 U Calvariu
        const casernePompiers1 = L.marker([41.74719578738131, 9.171842037972397], {
            title: 'Pompiers - 80 U Calvariu'
        }).addTo(map);
       
        casernePompiers1.bindPopup(`
            <strong>üöí Base foresti√®re de Zonza</strong><br>
            <em>80 U Calvariu, 20124 Zonza</em><br><br>
            Temps d'intervention estim√©s:<br>
            ‚Ä¢ Zone optimale Nord: <strong>4-6 min</strong><br>
            ‚Ä¢ Zones acceptables: <strong>3-5 min</strong><br>
            ‚Ä¢ Zones √† √©viter Sud: <strong>7-9 min</strong>
        `);
       
        // Caserne pompiers - 609 Strada di Livia
        const casernePompiers2 = L.marker([41.745868495688164, 9.168768497728085], {
            title: 'Pompiers - 609 Strada di Livia'
        }).addTo(map);
       
        casernePompiers2.bindPopup(`
            <strong>üöí Centre de Secours</strong><br>
            <em>609 Strada di Livia, 20124 Zonza</em><br><br>
            Temps d'intervention estim√©s:<br>
            ‚Ä¢ Zone optimale Nord: <strong>5-7 min</strong><br>
            ‚Ä¢ Zones acceptables Ouest: <strong>4-6 min</strong><br>
            ‚Ä¢ Zones √† √©viter: <strong>2-3 min</strong>
        `);
       
        // Fl√®che pointant vers la zone optimale
        const arrow = L.polyline([
            [41.745, 9.178],
            [41.757, 9.171]
        ], {
            color: '#28a745',
            weight: 4,
            opacity: 0.8
        }).addTo(map);
       
        L.marker([41.7535, 9.171], {
            icon: L.divIcon({
                html: '<div style="background: #28a745; color: white; padding: 5px 10px; border-radius: 5px; font-weight: bold; white-space: nowrap;">‚Üê ZONE RECOMMAND√âE</div>',
                className: '',
                iconSize: [150, 30]
            })
        }).addTo(map);
       
        // Contr√¥le des couches
        const baseMaps = {
            "Plan": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }),
            "Satellite": satellite
        };
       
        L.control.layers(baseMaps).addTo(map);
       
        // √âchelle
        L.control.scale({imperial: false, metric: true}).addTo(map);
       
        // Info popup automatique au chargement
        setTimeout(() => {
            zoneOptimale.openPopup();
        }, 1000);
    </script>
</body>

</html>
